lifecycle:
  startup:
    command: ["node", "app.js"]
commands:
  bot:
    help: Start a Slack bot
    events:
      hears:
        help: Triggered anytime a messages matches the pattern
        arguments:
          pattern:
            type: string
            help: A regexp pattern to filter messages
          channel:
            type: string
            help: Only listen in a specific channel
        http:
          port: 5000
          subscribe:
            path: /subscribe
            method: post
        output: &output
          type: object
          commands:
            reply:
              help: Reply to the message
              arguments:
                text:
                  type: string
                  required: true
                  help: Text of the message to send.
                channel:
                  type: string
                  required: true
                  help: Channel, private group, or IM channel to send message to.
                thread_ts:
                  type: string
                  help: Provide another message's `ts` value to make this message a reply. Avoid using a reply's `ts` value; use its parent instead.
              http:
                port: 5000
                method: post
                path: /send

      responds:
        help: Triggered by direct messages to the bot
        http:
          port: 5000
          method: post
          path: /subscribe
        arguments:
          pattern:
            type: string
            help: A regexp pattern to filter messages
        output:
          <<: *output

environment:
  name:
    help: The name of the bot
  token:
    help: The Slack bot token
